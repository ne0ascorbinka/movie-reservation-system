{% extends "movies/base.html" %}

{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/booking_detail.css' %}">
{% endblock %}


{% block title %}Бронювання місць — {{ showtime.movie.title }}{% endblock %}

{% block content %}
 

<h2>{{ showtime.movie.title }} — {{ showtime.start_time|date:"H:i, d M Y" }}</h2>

<div class="booking-container">
  <!-- Poster зліва -->
  <div class="poster">
    <img src="{{ showtime.movie.poster_url }}" alt="{{ showtime.movie.title }}">
  </div>

  <!-- Схема залу та форма -->
  <div class="hall-form-container">
    <!-- Схема залу -->
    <div class="hall-container">
      <div class="screen">ЕКРАН</div>
      <form method="post" id="booking-form">
        {% csrf_token %}
        {% for row in seat_rows %}
          <div class="seat-row">
            <div class="row-label">{{ row.row }}</div>
            {% for seat in row.seats %}
              <div class="seat {% if seat.occupied %}occupied{% endif %}" 
                   data-id="{{ seat.id }}">
                {{ seat.number }}
              </div>
            {% endfor %}
          </div>
        {% endfor %}
        <div class="legend">
          <div class="legend-item"><div class="legend-color free"></div> Вільне</div>
          <div class="legend-item"><div class="legend-color occupied"></div> Зайняте</div>
          <div class="legend-item"><div class="legend-color selected"></div> Обране</div>
        </div>
    </div>

   <div class="form-container">
  <button type="submit" class="confirm-btn">Підтвердити бронювання</button>
  </div>
    </form>
  </div>
</div>

{% endblock %}
{% block extra_js %}
<script src="{% static 'js/booking_detail.js' %}"></script>
{% endblock %}
